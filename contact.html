<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Contact — Power Link</title>

  <!-- CSS global + i18n -->
  <link rel="stylesheet" href="assets/styles.css" />
  <link rel="stylesheet" href="assets/i18n/i18n.css" />

  <!-- JS global + i18n -->
  <script defer src="assets/script.js"></script>
  <script defer src="assets/i18n/i18n.js"></script>
</head>
<body>
  <!-- Header -->
  <header class="site-header white-header">
    <a class="logo" href="index.html">
      <img src="assets/LOGO.jpg" alt="Power Link" />
    </a>

    <nav class="site-nav">
      <!-- Flags before HOME -->
      <div class="lang-switch">
        <button data-lang="en" onclick='setLanguage("en")'><img src="assets/flags/gb.svg" alt="English" /></button>
        <button data-lang="ar" onclick='setLanguage("ar")'><img src="assets/flags/sa.svg" alt="العربية" /></button>
      </div>
      <a href="index.html" data-i18n="nav.home">HOME</a>
      <a href="presentation.html" data-i18n="nav.about">ABOUT US</a>
      <a href="missions.html" data-i18n="nav.services">SERVICES</a>
      <a href="personnel.html" data-i18n="nav.team">TEAM</a>
      <a href="contact.html" class="active" data-i18n="nav.contact">CONTACT</a>
    </nav>

    <button class="menu-toggle" aria-label="Open menu"><span></span></button>
  </header>

  <!-- Drawer -->
  <div class="drawer" aria-hidden="true">
    <div class="overlay"></div>
    <div class="panel">
      <div class="header-row">
        <h3 data-i18n="nav.drawer">MAIN MENU</h3>
        <div class="lang-switch">
          <button data-lang="en" onclick='setLanguage("en")'><img src="assets/flags/gb.svg" alt="English" /></button>
          <button data-lang="ar" onclick='setLanguage("ar")'><img src="assets/flags/sa.svg" alt="العربية" /></button>
        </div>
        <button class="close-btn" aria-label="Close">×</button>
      </div>
      <a href="index.html" data-i18n="nav.home">HOME</a>
      <a href="presentation.html" data-i18n="nav.about">ABOUT US</a>
      <a href="missions.html" data-i18n="nav.services">SERVICES</a>
      <a href="personnel.html" data-i18n="nav.team">TEAM</a>
      <a href="contact.html" data-i18n="nav.contact">CONTACT</a>
    </div>
  </div>

  <!-- MAIN -->
  <main class="section contact">
    <div class="container">
      <div class="contact-shell slide-in" role="region" aria-labelledby="contact-title">
        <header class="contact-head">
          <h1 id="contact-title" data-i18n="contact.title">Contact us</h1>
          <p class="lead" data-i18n="contact.lead">
            Use the form below and our team will get back to you as soon as possible.
          </p>
        </header>

        <!-- Form -->
        <form id="contact-form" class="contact-form" action="https://formspree.io/f/mblzaevw" method="POST" novalidate>
          <div class="field">
            <label for="name"><span class="i18n-label-text" data-i18n="contact.name">Name</span></label>
            <input id="name" name="name" type="text" required minlength="2"
                   placeholder="Your name" data-i18n="contact.placeholder_name" autocomplete="name" />
            <p class="hint" data-for="name"></p>
          </div>

          <div class="field">
            <label for="email"><span class="i18n-label-text" data-i18n="contact.email">Email</span></label>
            <input id="email" name="email" type="email" required
                   placeholder="you@example.com" data-i18n="contact.placeholder_email"
                   inputmode="email" autocomplete="email" />
            <p class="hint" data-for="email"></p>
          </div>

          <div class="field">
            <label for="subject"><span class="i18n-label-text" data-i18n="contact.subject">Subject</span></label>
            <input id="subject" name="subject" type="text" required minlength="2"
                   placeholder="Subject" data-i18n="contact.placeholder_subject" />
            <p class="hint" data-for="subject"></p>
          </div>

          <div class="field">
            <label for="message"><span class="i18n-label-text" data-i18n="contact.message">Message</span></label>
            <textarea id="message" name="message" rows="6" required minlength="10"
                      placeholder="How can we help?" data-i18n="contact.placeholder_message"></textarea>
            <p class="hint" data-for="message"></p>
          </div>

          <div class="form-actions">
            <button class="btn" type="submit" data-i18n="contact.send">Send message</button>
            <p class="small privacy" data-i18n="contact.privacy">
              By sending this form, you agree to be contacted back about your request.
            </p>
          </div>

          <output id="form-status" class="form-status" role="status" aria-live="polite"></output>
        </form>
      </div>
    </div>
  </main>

  <!-- Footer -->
  <footer class="site-footer">
    © <span id="year"></span>
    <span data-i18n="footer.rights">Power Link — All rights reserved.</span>
  </footer>

  <!-- Envoi doux + messages (compatible Formspree) -->
  <script>
  document.addEventListener('DOMContentLoaded', () => {
    const form   = document.getElementById('contact-form');
    const status = document.getElementById('form-status');
    if (!form) return;

    const err = (id, msg) => {
      const field = document.getElementById(id)?.closest('.field');
      const hint  = form.querySelector('.hint[data-for="'+ id +'"]');
      if (field) field.classList.add('is-invalid');
      if (hint)  hint.textContent = msg || '';
    };
    const clear = () => {
      form.querySelectorAll('.field.is-invalid').forEach(el => el.classList.remove('is-invalid'));
      form.querySelectorAll('.hint').forEach(h => h.textContent = '');
      status.textContent = ''; status.className = 'form-status';
    };

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      clear();

      const fd = new FormData(form);
      const name = (fd.get('name')||'').toString().trim();
      const mail = (fd.get('email')||'').toString().trim();
      const subj = (fd.get('subject')||'').toString().trim();
      const msg  = (fd.get('message')||'').toString().trim();

      let ok = true;
      if (!name) err('name', 'Please enter your name.'), ok = false;
      if (!/^[^@\s]+@[^@\s]+\.[^@\s]+$/.test(mail)) err('email', 'Valid email required.'), ok = false;
      if (!subj) err('subject', 'Please add a subject.'), ok = false;
      if (msg.length < 10) err('message', 'Please write a short message.'), ok = false;
      if (!ok) return;

      try {
        const r = await fetch(form.action, {
          method: 'POST',
          headers: { 'Accept': 'application/json' },
          body: fd
        });
        if (r.ok) {
          form.reset();
          status.textContent = 'Message sent successfully. We will get back to you shortly.';
          status.classList.add('success');
        } else {
          status.textContent = 'Something went wrong. Please try again later.';
          status.classList.add('error');
        }
      } catch {
        status.textContent = 'Network error. Please try again.';
        status.classList.add('error');
      }
    });
  });
  </script>
</body>
</html>
