/* ========= POWER LINK — Mobile/Drawer/Flags (clean) ========= */

/* ==== Variables (garde tes autres tokens) ==== */
:root{
  --flag-d-w: 24px;   /* desktop */
  --flag-d-h: 24px;
  --flag-m-w: 26px;   /* mobile */
  --flag-m-h: 26px;
  --flag-gap: .5rem;
}

/* ===== Anti liseré blanc universel ===== */
html, body { max-width:100% !important; overflow-x:hidden !important; }
img, svg { max-width:100%; height:auto; }

/* Le drawer ne doit jamais peindre hors écran */
.drawer { overflow:hidden !important; -webkit-overflow-scrolling:touch; }
.drawer .panel { clip-path: inset(0 0 0 0); }

/* ===== Drawer (structure & animation safe) ===== */
.drawer { position:fixed; inset:0; z-index:300; pointer-events:none; }
.drawer .overlay{
  position:absolute; inset:0; background:rgba(0,0,0,.35);
  opacity:0; transition:opacity .25s ease;
}
.drawer .panel{
  position:absolute; top:0; right:0; width:78%; max-width:380px; height:100%;
  background:#fff; box-shadow:-10px 0 30px rgba(0,0,0,.25);
  display:flex; flex-direction:column; gap:8px; padding:18px;
  transform:translateX(100%); transition:transform .25s ease; will-change:transform;
}
.drawer.open{ pointer-events:auto; }
.drawer.open .overlay{ opacity:1; }
.drawer.open .panel{ transform:translateX(0); }

/* RTL : panneau coulisse depuis la gauche */
[dir="rtl"] .drawer .panel{ left:0; right:auto; transform:translateX(-100%); }
[dir="rtl"] .drawer.open .panel{ transform:translateX(0); }

/* ===== Header du drawer : ligne unique, stable ===== */
@media (max-width:980px){
  /* LTR — [Title] .... [Flags] [X] */
  .drawer .panel .header-row{
    display:grid !important;
    grid-template-columns: 1fr auto auto !important;
    align-items:center !important;
    column-gap:10px !important;
    padding-inline:12px !important;
    min-height:56px;
  }
  .drawer .panel .header-row h3{
    grid-column:1 !important; margin:0 !important; text-align:left !important;
    min-width:0; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
  }
  .drawer .panel .header-row .lang-switch{
    grid-column:2 !important; margin:0 !important; display:inline-flex !important;
    align-items:center; gap:8px; flex-wrap:nowrap;
  }
  .drawer .panel .header-row .close-btn{
    grid-column:3 !important; margin:0 !important; justify-self:end !important;
    padding:6px 10px; line-height:1; border-radius:999px;
    background:rgba(0,0,0,.04); border:1px solid rgba(0,0,0,.06);
  }

  /* RTL — [X] [Flags] .... [Title] */
  [dir="rtl"] .drawer .panel .header-row{
    grid-template-columns: auto auto 1fr !important;
    direction: rtl; /* n’affecte que cette ligne */
  }
  [dir="rtl"] .drawer .panel .header-row .close-btn{
    grid-column:1 !important; justify-self:start !important; margin:0 !important;
  }
  [dir="rtl"] .drawer .panel .header-row .lang-switch{
    grid-column:2 !important; justify-self:start !important; margin:0 !important;
  }
  [dir="rtl"] .drawer .panel .header-row h3{
    grid-column:3 !important; justify-self:end !important; text-align:right !important; margin:0 !important;
  }
}

/* ===== Flags — même rendu desktop & mobile ===== */
/* Conteneur (desktop nav & drawer) */
.site-header .site-nav > .lang-switch,
.drawer .header-row .lang-switch{
  display:inline-flex !important; gap:var(--flag-gap); align-items:center; justify-content:center;
}

/* Bouton flag — rond, taille adaptée */
.lang-switch button{
  width:var(--flag-d-w); height:var(--flag-d-h);
  border:0; padding:0; background:transparent; cursor:pointer;
  display:inline-flex; align-items:center; justify-content:center;
  border-radius:50%; overflow:hidden;
  box-shadow:0 0 0 1px rgba(0,0,0,.14);   /* fin trait net */
  transition:box-shadow .2s ease, transform .12s ease;
}
.lang-switch button img{
  width:100%; height:100%; object-fit:cover; display:block; border-radius:50%;
}
/* Actif : anneau discret (pas de glow) */
.lang-switch button.active{ box-shadow:0 0 0 2px #2A9FFF; transform:none; }

/* GB : fond blanc pour un cercle propre */
.lang-switch button img[src*="gb"]{ background:#fff; border-radius:50%; }

/* Mobile : même look, taille un poil plus grande */
@media (max-width:980px){
  .lang-switch button{ width:var(--flag-m-w); height:var(--flag-m-h); }
}

/* ===== Nav mobile : hamburger visible, nav masquée ===== */
@media (max-width:980px){
  .white-header .site-nav{ display:none !important; }
  .menu-toggle{ display:flex !important; margin-left:auto; cursor:pointer; -webkit-tap-highlight-color:transparent; }
}

/* ===== (option) sur desktop : flags un peu plus près du logo ===== */
@media (min-width:981px){
  .site-header .site-nav > .lang-switch{ margin-inline-end:.5rem; }
}
