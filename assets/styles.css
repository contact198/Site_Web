/* ========= POWER LINK — FINAL PRO UI =========
   - Accessibilité: focus-visible, réduction des motions
   - I18N: support [dir="rtl"] (arabe)
   - Layout: largeur unifiée, header sticky, drawer mobile
   - Fond: luxe (image)
   - Contact: panneau premium + champs XL
   - Flags: plats + halo bleu (desktop + mobile)
=========================================================== */

/* --- Design tokens --- */
:root {
  --green-900:#0F2A1F;
  --green-800:#123223;
  --green-700:#16402B;
  --green-600:#1D5336;
  --green-500:#2A6B45;
  --green-300:#69B779;
  --green-200:#BDEBC7;
  --white:#ffffff;
  --muted:#C8D6CE;

  --radius:16px;
  --shadow:0 10px 30px rgba(0,0,0,.35);
  --header-h:90px;
  --container-w:1180px;
  --page-max:960px;
  --gutter:22px;

  --fs-1:clamp(30px,5vw,56px);
  --fs-2:clamp(20px,2.4vw,28px);
  --fs-3:16px;

  --ring: 0 0 0 3px rgba(105,183,121,.35);
}

/* --- Reset + Base --- */
* { box-sizing:border-box; }
html { scroll-behavior:smooth; }
html, body {
  margin:0;
  padding:0;
  color:var(--white);
  font:16px/1.6 "Inter", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
}

/* Fond luxe */
body {
  background:#0F2A1F url('assets/bg-luxury.jpg') center/cover no-repeat;
  background-attachment:scroll;
}

/* Ancrage amélioré */
:root { scroll-padding-top: calc(var(--header-h) + 16px); }

/* Liens */
a { color:var(--green-200); text-decoration:none; transition:color .2s ease; }
a:hover { color:#E9FFB3; }
a:focus-visible { outline:none; box-shadow:var(--ring); border-radius:8px; }

/* --- Buttons --- */
.btn {
  display:inline-block;
  padding:12px 18px;
  border-radius:14px;
  font-weight:700;
  background:linear-gradient(135deg,var(--green-300),#E8FFC7);
  color:#0f2a1f;
  border:none;
  box-shadow:var(--shadow);
  transition:transform .18s ease, box-shadow .18s ease, filter .18s ease;
}
@media (hover:hover) and (pointer:fine){
  .btn:hover { transform:translateY(-2px); box-shadow:0 10px 30px rgba(0,0,0,.4); }
}
.btn:active { transform:translateY(0); filter:saturate(.98); }
.btn:focus-visible { outline:none; box-shadow:var(--ring), var(--shadow); }
.btn.secondary {
  background:rgba(255,255,255,.08);
  color:var(--white);
  border:1px solid rgba(255,255,255,.12);
  box-shadow:none;
}

/* --- Layout --- */
.container { max-width:var(--container-w); margin:0 auto; padding:0 var(--gutter); }
.section { padding:52px 0; }

.card {
  background:rgba(255,255,255,.06);
  border:1px solid rgba(255,255,255,.12);
  border-radius:var(--radius);
  padding:20px;
  box-shadow:var(--shadow);
  transition:transform .18s ease, box-shadow .18s ease;
}
@media (hover:hover) and (pointer:fine){
  .card:hover { transform:translateY(-2px); box-shadow:0 12px 28px rgba(0,0,0,.45); }
}

/* ===== Gabarit commun ===== */
.page {
  min-height: calc(100vh - var(--header-h) - 120px);
  display:flex;
  align-items:center;
  justify-content:center;
  padding:60px 0;
}
.page .container { max-width: var(--page-max); width:100%; padding:0 24px; }

/* --- Header --- */
.white-header {
  background:#ffffff;
  border-bottom:1px solid rgba(0,0,0,0.08);
  box-shadow:0 3px 8px rgba(0,0,0,0.05);
  color:#16402B;
  position:sticky;
  top:0;
  z-index:200;
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:0 18px;
  height:var(--header-h);
}
.white-header .logo img {
  height:60px;
  width:auto;
  display:block;
  object-fit:contain;
  margin-top:2px;
}
.white-header .site-nav {
  display:flex;
  gap:28px;
  align-items:center;
  overflow:visible;
}
.white-header .site-nav a {
  color:#1D5336;
  font-weight:600;
  letter-spacing:.5px;
  text-transform:uppercase;
  font-size:15px;
  position:relative;
  transition:color .2s ease;
}
.white-header .site-nav a:hover,
.white-header .site-nav a.active { color:#69B779; }
.white-header .site-nav a::after {
  content:"";
  position:absolute;
  bottom:-6px;
  left:0;
  width:0%;
  height:2px;
  background:#69B779;
  transition:width .3s ease;
}
.white-header .site-nav a:hover::after,
.white-header .site-nav a.active::after { width:100%; }

/* --- Hamburger --- */
.menu-toggle {
  display:none;
  width:44px;
  height:44px;
  border-radius:10px;
  border:1px solid rgba(0,0,0,.08);
  background:#fff;
  justify-content:center;
  align-items:center;
}
.menu-toggle span,
.menu-toggle span::before,
.menu-toggle span::after {
  display:block;
  width:22px;
  height:2px;
  background:#1D5336;
  content:"";
  position:relative;
}
.menu-toggle span::before { position:absolute; transform:translateY(-6px); }
.menu-toggle span::after { position:absolute; transform:translateY(6px); }

/* --- Drawer --- */
.drawer {
  position:fixed;
  inset:0;
  z-index:300;
  pointer-events:none;
}
.drawer .overlay {
  position:absolute;
  inset:0;
  background:rgba(0,0,0,.35);
  opacity:0;
  transition:opacity .25s ease;
}
.drawer .panel {
  position:absolute;
  top:0;
  right:-80%;
  width:78%;
  max-width:380px;
  height:100%;
  background:#fff;
  box-shadow:-10px 0 30px rgba(0,0,0,.25);
  display:flex;
  flex-direction:column;
  padding:18px;
  gap:8px;
  transition:right .25s ease;
}
.drawer.open { pointer-events:auto; }
.drawer.open .overlay { opacity:1; }
.drawer.open .panel { right:0; }

.drawer .panel h3 {
  margin:4px 0 8px;
  color:#1D5336;
  font-size:16px;
  letter-spacing:.3px;
  font-weight:700;
  display:flex;
  align-items:center;
  justify-content:space-between;
}
.drawer .panel a {
  display:flex;
  align-items:center;
  justify-content:space-between;
  text-decoration:none;
  color:#374151;
  padding:14px 10px;
  border-top:1px solid #eee;
  text-transform:uppercase;
  letter-spacing:.3px;
  font-weight:600;
  font-size:15px;
}
.drawer .panel a:first-of-type { border-top:none; }

/* --- Footer --- */
.site-footer {
  padding:40px 20px;
  text-align:center;
  color:var(--muted);
  border-top:1px solid rgba(255,255,255,.08);
  margin-top:44px;
}

/* --- FLAGS — plats + halo bleu + X éloignée --- */
.site-header .site-nav > .lang-switch,
.drawer .header-row .lang-switch {
  display:inline-flex !important;
  align-items:center;
  justify-content:center;
  gap:.4rem;
}

/* Zone cliquable */
.lang-switch button {
  width:34px;
  height:24px;
  padding:0;
  border:none;
  background:transparent;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  cursor:pointer;
  transition: transform .15s ease, box-shadow .2s ease;
}

/* Image */
.lang-switch img {
  width:28px;
  height:20px;
  object-fit:cover;
  display:block;
  border-radius:2px;
  box-shadow:0 0 0 1px rgba(0,0,0,.12);
  transition: box-shadow .25s ease, transform .15s ease, filter .2s ease;
}

/* Hover */
@media (hover:hover) and (pointer:fine){
  .lang-switch button:hover img {
    filter: drop-shadow(0 0 8px rgba(42,159,255,.55))
            drop-shadow(0 0 2px rgba(42,159,255,.45));
  }
}

/* Actif */
.lang-switch button.active img {
  filter: drop-shadow(0 0 10px rgba(42,159,255,.75))
          drop-shadow(0 0 3px rgba(42,159,255,.65));
}

/* GB fond blanc */
.lang-switch img[src*="gb"] {
  background:#fff;
  border-radius:2px;
}

/* Drawer header — croix éloignée */
.drawer .panel .header-row {
  display:flex;
  align-items:center;
  column-gap:14px;
  justify-content:flex-start;
}
.drawer .panel .header-row h3 { margin:0; }
.drawer .panel .header-row .lang-switch { margin-inline-end:auto; }
.drawer .panel .close-btn {
  margin-left:auto;
  padding:6px 10px;
  border-radius:999px;
  background:rgba(0,0,0,.04);
  border:1px solid rgba(0,0,0,.06);
  line-height:1;
}

/* Petits écrans */
@media (max-width:420px){
  .drawer .header-row .lang-switch img { width:26px; height:18px; }
  .drawer .header-row .lang-switch button { width:32px; height:22px; }
}

/* --- Contact (premium) --- */
.contact {
  padding-top:64px;
  padding-bottom:72px;
}
.contact-shell {
  max-width: var(--page-max);
  margin:0 auto;
  padding:40px 32px;
  border-radius:var(--radius);
  background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.04));
  border:1px solid rgba(255,255,255,.12);
  box-shadow:var(--shadow);
  backdrop-filter: blur(8px) saturate(110%);
}
.contact-head { text-align:center; margin-bottom:36px; }
.contact-head h1 {
  margin:0 0 8px;
  font-size:clamp(32px,5vw,46px);
  line-height:1.2;
  filter:drop-shadow(0 6px 22px rgba(0,0,0,.28));
}
.contact-head .lead { margin:0 0 16px; font-size:18px; opacity:.9; }

.contact-form { display:grid; gap:20px; }
.field { display:grid; gap:6px; }
.field label, .i18n-label-text { font-weight:700; letter-spacing:.2px; color:#f2f7f3; }
.field input, .field textarea {
  appearance:none;
  width:100%;
  padding:18px 20px;
  font-size:17px;
  line-height:1.4;
  border-radius:18px;
  border:1px solid rgba(255,255,255,.18);
  background:rgba(255,255,255,.08);
  color:#fff;
  box-shadow:inset 0 1px 0 rgba(255,255,255,.08), 0 6px 16px rgba(0,0,0,.20);
  transition:border-color .2s ease, box-shadow .2s ease, background .2s ease;
}
.field input { height:56px; }
.field textarea { min-height:180px; resize:vertical; }
.field ::placeholder { color:rgba(255,255,255,.72); }

/* Focus premium */
.field input:focus-visible,
.field textarea:focus-visible {
  outline:none;
  border-color:#BDEBC7;
  box-shadow:0 0 0 4px rgba(105,183,121,.28), 0 10px 22px rgba(0,0,0,.28);
  background:rgba(255,255,255,.10);
}

/* Erreurs */
.field.is-invalid input, .field.is-invalid textarea {
  border-color:#ff9aa2;
  box-shadow:0 0 0 4px rgba(255,154,162,.18), 0 10px 22px rgba(0,0,0,.28);
}
.field .hint { min-height:18px; font-size:13px; color:#ffd4d7; }

/* Actions */
.form-actions { display:grid; justify-items:center; gap:8px; margin-top:8px; }
.form-actions .btn { padding:16px 42px; font-size:17px; border-radius:18px; }

/* Statut */
.form-status { display:block; margin-top:10px; text-align:center; font-weight:600; letter-spacing:.2px; }
.form-status.success { color:#BDEBC7; }
.form-status.error { color:#ffb3b8; }

/* Cache phrase légale */
.contact-form .privacy { display:none !important; }

/* Mobile */
@media (max-width:600px){
  .contact-shell { padding:22px 16px; }
}

/* --- Accessibilité --- */
@media (prefers-reduced-motion: reduce){
  html { scroll-behavior:auto; }
  .slide-in, body { animation:none !important; transition:none !important; }
}
:focus-visible { outline:none; box-shadow:var(--ring); }

/* --- RTL --- */
[dir="rtl"] .white-header .site-nav { flex-direction:row-reverse; }
[dir="rtl"] .site-header .site-nav > .lang-switch { margin-inline-start:.5rem; margin-inline-end:0; }
[dir="rtl"] .drawer .panel { left:-80%; right:auto; }
[dir="rtl"] .drawer.open .panel { left:0; }
[dir="rtl"] .table th, [dir="rtl"] .table td { text-align:right; }

/* === PATCH — Premium flags desktop + mobile, RTL close push === */

/* 0) Variables d’échelle (facile à ajuster) */
:root{
  --flag-w-desktop: 24px;
  --flag-h-desktop: 16px;
  --flag-w-mobile:  26px;
  --flag-h-mobile:  18px;
  --flag-radius:    3px;
  --flag-gap:       .5rem;
}

/* 1) Groupe de drapeaux — premium, discret */
.site-header .site-nav > .lang-switch,
.drawer .header-row .lang-switch{
  display:inline-flex !important;
  align-items:center;
  gap: var(--flag-gap);
  /* espace “air” côté nav */
  margin-inline-end: .75rem;
}

/* 2) Bouton = cadre exact du drapeau (overflow masque les marges internes des SVG) */
.lang-switch button{
  width: var(--flag-w-desktop);
  height: var(--flag-h-desktop);
  padding: 0;
  border: none;
  background: transparent;
  border-radius: var(--flag-radius);
  overflow: hidden;               /* ❤ force l’image à ne PAS dépasser / corrige GB */
  display: inline-flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 0 0 1px rgba(0,0,0,.12); /* trait net, haut de gamme */
  transition: box-shadow .2s ease, transform .15s ease;
}

/* Image = 100% du cadre */
.lang-switch button img{
  width: 100%;
  height: 100%;
  object-fit: cover;              /* uniforme même si le SVG a du blanc interne */
  display: block;
}

/* Inactif : pas de glow bleu */
.lang-switch button:not(.active){ box-shadow: 0 0 0 1px rgba(0,0,0,.12); }

/* Hover desktop : soulignement très subtil */
@media (hover:hover) and (pointer:fine){
  .lang-switch button:hover{ box-shadow: 0 0 0 2px rgba(105,183,121,.35); transform: translateY(-1px); }
}

/* Actif : fin anneau bleu, propre (pas de drop-shadow qui grossit visuellement) */
.lang-switch button.active{
  box-shadow: 0 0 0 2px #2A9FFF;
  transform: none;
}

/* GB : fond blanc pour neutraliser les bordures internes éventuelles */
.lang-switch img[src*="gb"]{ background:#fff; }

/* 3) Version mobile : mêmes tailles exactes (pas d’illusion optique) */
@media (max-width: 980px){
  .lang-switch button{
    width: var(--flag-w-mobile);
    height: var(--flag-h-mobile);
    border-radius: var(--flag-radius);
  }
}

/* 4) Drawer header : éloigner franchement la croix en LTR */
.drawer .panel .header-row{
  display:flex; align-items:center; gap: 12px; justify-content:flex-start;
}
.drawer .panel .header-row h3{ margin:0; }
.drawer .panel .header-row .lang-switch{ margin-inline-end:auto; }
.drawer .panel .close-btn{
  margin-left:auto;               /* pousse complètement à droite en LTR */
  padding: 6px 10px;
  border-radius: 999px;
  background: rgba(0,0,0,.04);
  border: 1px solid rgba(0,0,0,.06);
  line-height: 1;
}

/* 5) RTL : inverser le flux ET pousser encore plus la croix */
[dir="rtl"] .drawer .panel .header-row{
  flex-direction: row-reverse;    /* titre à droite, croix tout à gauche */
}
[dir="rtl"] .drawer .panel .header-row .lang-switch{
  margin-inline-start: auto;      /* espace entre drapeaux et titre */
  margin-inline-end: 0;
}
[dir="rtl"] .drawer .panel .close-btn{
  margin-right: auto;             /* colle la croix au bord gauche */
  margin-left: 0;
}

